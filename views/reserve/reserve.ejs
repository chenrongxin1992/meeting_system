<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <title>会议室申请</title>

    <!-- Bootstrap -->
    <link href="/stylesheets/bootstrap.min.css" rel="stylesheet">
    <!-- <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css"> -->
    <link rel='stylesheet' href='/stylesheets/bootstrapValidator.min.css' />
    <style type="text/css">
      h3{
        padding-top: 10px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="row">
        <div class="col-md-6">
          <img src="/images/szucsselogo.png" class="img-responsive" alt="Responsive image"/>
          
        </div>
        <div class="col-md-6"><h3>会议室申请系统</h3></div>
      </div>
      <div class="row">
        <div class="col-md-4 col-md-offset-4"><strong>(会议室名称)申请表</strong></div>
      </div>
      <div class="row">
        <hr>
      </div>

      <form class="form-horizontal" role="form">
        <div class="form-group">
          <label for="meeting_name" class="col-sm-2 control-label">会议名称</label>
          <div class="col-sm-4">
            <input type="text" class="form-control" id="meeting_name" 
                 placeholder="请输入会议名称">
          </div>
          
        </div>
        <div class="form-group">
          <label for="meeting_num" class="col-sm-2 control-label">参会人数</label>
          <div class="col-sm-4">
            <input type="text" class="form-control" id="meeting_num" 
                 placeholder="请输入人数">
          </div>
        </div>
        
        <div class="form-group">
          <label for="meeting_content" class="col-sm-2 control-label">会议内容</label>
          <div class="col-sm-4">
            <textarea class="form-control" rows="3" id="meeting_content" placeholder="请输入会议内容"></textarea>
          </div>
        </div>
        
        
        <div class="form-group">
          <label for="apply_name" class="col-sm-2 control-label">申请人</label>
          <div class="col-sm-4">
            <input type="text" class="form-control" id="apply_name" 
                 placeholder="请输入申请人">
          </div>
        </div>
        
        <div class="form-group">
          <label for="phone" class="col-sm-2 control-label">联系电话</label>
          <div class="col-sm-4">
            <input type="text" class="form-control" id="phone" 
                 placeholder="请输入联系电话">
          </div>
        </div>
        
        <div class="form-group">
          <label for="meeting_date" class="col-sm-2 control-label">使用日期</label>
          <div class="col-sm-4">
            <input type="text" class="form-control" id="meeting_date" 
                 placeholder="请输入使用日期">
          </div>
        </div>
        
        <div class="form-group">
          <label for="meeting_time" class="col-sm-2 control-label">会议时间</label>
          <div class="col-sm-4">
            <input type="text" class="form-control" id="meeting_time" 
                 placeholder="请输入会议时间">
          </div>
        </div>
        
        <div class="form-group">
          <div class="col-sm-offset-2 col-sm-10">
            <button type="submit" class="btn btn-default" name="submit">提交</button>
          </div>
        </div>
      </form>

      <div class="row">
        <hr>
      </div>

      <div class="row">
        <div class="col-md-4 col-md-offset-4">
          <address><p class="pull-right">©深圳大学 计算机与软件学院</p><p>©2017 </p></address>
        </div>
      </div>
</div>
    
        
    <script type="text/javascript" src='/javascripts/jquery-1.10.2.min.js'></script>
    <!-- <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script> -->
    <script type="text/javascript" src='/javascripts/bootstrap.min.js' ></script>
    <script type="text/javascript" src='/javascripts/bootstrapValidator.min.js' ></script>
    <script type="text/javascript" src='/javascripts/zh_CN.js' ></script>
    <script type="text/javascript">
      $(document).ready(function(){
        $('.btn').on("click",function(){
          var meeting_name = $('#meeting_name').val(),
              meeting_num = $('#meeting_num').val(),
              meeting_content = $('#meeting_content').val(),
              apply_name = $('#apply_name').val(),
              phone = $('#phone').val(),
              meeting_date = $('#meeting_date').val(),
              meeting_time = $('#meeting_time').val()

          if(!meeting_name || typeof meeting_name == 'undefined'){
            alert('会议室编号或名称不能为空！')
            return false
          }
          if(meeting_name.length > 30){
            alert('会议名称长度超过30！')
            return false
          }
          if(!meeting_num || typeof meeting_num == 'undefined'){
            alert('参会人数不能为空！')
            return false
          }
          if(!meeting_content || typeof meeting_content == 'undefined'){
            alert('会议内容不能为空!')
            return false
          }
          if(meeting_content.length > 300){
            alert('会议内容过长！')
            return false
          }
          if(!apply_name || typeof apply_name == 'undefined'){
            alert('申请人不能为空！')
          }
          if(!phone || typeof phone == 'undefined'){
            alert('联系号码不能为空！')
          }

          $.ajax({
            url: '/manage/add_meeting_room', 
            async: true,
            dataType: 'json',
            type: 'POST',
            data: {
              room_name:room_name
            },

            success: function(result){
              console.log(result)
              if(result.data == 1){
                alert('该会议室已存在！')
                window.location.reload()
              }else{
                alert('添加成功！')
              }
            },
            error: function(jqXHR , textStatus , errorThrown){
              console.log("error");
              console.error()
            },
           
          });
        });
      });

     /* $(function () {
        $('form').bootstrapValidator({
            message: 'This value is not valid',
            feedbackIcons: {
                valid: 'glyphicon glyphicon-ok',
                invalid: 'glyphicon glyphicon-remove',
                validating: 'glyphicon glyphicon-refresh'
            },
            fields: {
                meeting_name: {
                    message: '会议名称验证失败',
                    validators: {
                        notEmpty: {
                            message: '会议名称不能为空'
                        },
                        stringLength: {
                            min: 6,
                            max: 18,
                            message: '用户名长度必须在6到18位之间'
                        },
                        regexp: {
                            regexp: /^[a-zA-Z0-9_]+$/,
                            message: '用户名只能包含大写、小写、数字和下划线'
                        }
                    }
                }
            }
        });
    });*/
    
  </script>
  </body>
</html>